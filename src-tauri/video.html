<!doctype html>
<html>
  <head>
    <title>Webcam</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      #controls {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.5);
        padding: 10px;
        z-index: 10;
      }
      #video {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <div id="controls">
      <label for="camera-select">Choose Camera:</label>
      <select id="camera-select"></select>
      <button id="start-button">Start Video</button>
    </div>
    <video id="video" autoplay playsinline></video>
    <script>
      function populateCameraOptions(cameras) {
        const select = document.getElementById("camera-select");
        cameras.forEach((camera) => {
          const option = document.createElement("option");
          option.value = camera.deviceId;
          option.textContent = camera.label || "Camera " + camera.deviceId;
          select.appendChild(option);
        });
      }

      document
        .getElementById("start-button")
        .addEventListener("click", async () => {
          const select = document.getElementById("camera-select");
          const deviceId = select.value;
          try {
            const stream = await navigator.mediaDevices.getUserMedia({
              video: { deviceId },
            });
            document.getElementById("video").srcObject = stream;
          } catch (err) {
            console.error("Error accessing camera:", err);
          }
        });

      navigator.mediaDevices.enumerateDevices().then((devices) => {
        const cameras = devices.filter(
          (device) => device.kind === "videoinput",
        );
        populateCameraOptions(cameras);
      });
    </script>
  </body>
</html>
